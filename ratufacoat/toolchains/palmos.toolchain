# ---------------------------------------------------------------------------
# Multi-Phasic Applications: SquirrelJME
#     Copyright (C) Stephanie Gawroriski <xer@multiphasicapps.net>
# ---------------------------------------------------------------------------
# SquirrelJME is under the GNU General Public License v3+, or later.
# See license.mkd for licensing and copyright information.
# ---------------------------------------------------------------------------
# DESCRIPTION: PalmOS ToolChain (Linux)
#
# Debian Packages:
# * http://archive.debian.org/debian/pool/main/p/prc-tools/
# * http://archive.debian.org/debian/pool/main/p/pilrc/

# Set to "Generic" because otherwise PalmOS would need to be defined
set(CMAKE_SYSTEM_NAME Generic)
set(CMAKE_SYSTEM_PROCESSOR m68k)

# Cross compiling, we cannot run the target executables
set(CMAKE_CROSSCOMPILING TRUE)

# Just pull the compiler from PATH
find_program(CMAKE_MAKE_PROGRAM make)
find_program(CMAKE_C_COMPILER m68k-palmos-gcc)
find_program(CMAKE_CXX_COMPILER m68k-palmos-g++)

#set(CMAKE_SYSROOT /usr/local/share/palmdev/sdk-5r4)
set(CMAKE_FIND_ROOT_PATH
	/usr/local/share/palmdev/sdk-5r4/lib)
set(CMAKE_C_STANDARD_INCLUDE_DIRECTORIES
	/usr/local/share/palmdev/sdk-5r4/include)
set(CMAKE_CXX_STANDARD_INCLUDE_DIRECTORIES
	/usr/local/share/palmdev/sdk-5r4/include)

set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)

# PalmOS needs PilotMain, so we just force both compilers to work here
set(CMAKE_C_COMPILER_FORCED TRUE)
set(CMAKE_CXX_COMPILER_FORCED TRUE)

# Use for CMake Builds
set(PALMOS TRUE)
